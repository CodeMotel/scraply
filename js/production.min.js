function resizeDiv(){vpw=$(window).width(),vph=$(window).height(),$("#gallery a.active").css({height:vph-32+"px"})}(function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}var c=a.prototype;c.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},c.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},c.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},c.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},c.on=c.addListener,c.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},c.once=c.addOnceListener,c.defineEvent=function(a){return this.getListeners(a),this},c.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},c.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},c.off=c.removeListener,c.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},c.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},c.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},c.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},c.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],f=c.listener.apply(this,b||[]),(f===this._getOnceReturnValue()||c.once===!0)&&this.removeListener(a,g[e][d].listener);return this},c.trigger=c.emitEvent,c.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},c.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.EventEmitter=a}).call(this),function(a){"use strict";var b=document.documentElement,c=function(){};b.addEventListener?c=function(a,b,c){a.addEventListener(b,c,!1)}:b.attachEvent&&(c=function(b,c,d){b[c+d]=d.handleEvent?function(){var b=a.event;b.target=b.target||b.srcElement,d.handleEvent.call(d,b)}:function(){var c=a.event;c.target=c.target||c.srcElement,d.call(b,c)},b.attachEvent("on"+c,b[c+d])});var d=function(){};b.removeEventListener?d=function(a,b,c){a.removeEventListener(b,c,!1)}:b.detachEvent&&(d=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var e={bind:c,unbind:d};"function"==typeof define&&define.amd?define("eventie/eventie",e):a.eventie=e}(this),function(a){"use strict";function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===i.call(a)}function d(a){var b=[];if(c(a))b=a;else if("number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,c){function e(a,c,g){if(!(this instanceof e))return new e(a,c);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=d(a),this.options=b({},this.options),"function"==typeof c?g=c:b(this.options,c),g&&this.on("always",g),this.getImages(),f&&(this.jqDeferred=new f.Deferred);var h=this;setTimeout(function(){h.check()})}function i(a){this.img=a}e.prototype=new a,e.prototype.options={},e.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var d=c.querySelectorAll("img"),e=0,f=d.length;f>e;e++){var g=d[e];this.addImage(g)}}},e.prototype.addImage=function(a){var b=new i(a);this.images.push(b)},e.prototype.check=function(){function a(a,e){return b.options.debug&&h&&g.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},e.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify(b,a)})},e.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},f&&(f.fn.imagesLoaded=function(a,b){var c=new e(this,a,b);return c.jqDeferred.promise(f(this))});var j={};return i.prototype=new a,i.prototype.check=function(){var a=j[this.img.src];if(a)return void this.useCached(a);if(j[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this.proxyImage=new Image;c.bind(b,"load",this),c.bind(b,"error",this),b.src=this.img.src},i.prototype.useCached=function(a){if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else{var b=this;a.on("confirm",function(a){return b.confirm(a.isLoaded,"cache emitted confirmed"),!0})}},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},i.prototype.unbindProxyEvents=function(){c.unbind(this.proxyImage,"load",this),c.unbind(this.proxyImage,"error",this)},e}var f=a.jQuery,g=a.console,h="undefined"!=typeof g,i=Object.prototype.toString;"function"==typeof define&&define.amd?define("imagesLoaded",["eventEmitter/EventEmitter","eventie/eventie"],e):a.imagesLoaded=e(a.EventEmitter,a.eventie)}(window),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){g(function(){var b,c;for(b=0;b<a.length;b++)c=a[b],c.obj.css(c.css)})}function c(b){return a.trim(b).toLowerCase()}var d,e,f;f=function(a,b){return function(){return a.apply(b,arguments)}},e={align:"center",autoResize:!1,comparator:null,container:a("body"),direction:void 0,ignoreInactiveItems:!0,itemWidth:0,fillEmptySpace:!1,flexibleWidth:0,offset:2,outerOffset:0,onLayoutChanged:void 0,possibleFilters:[],resizeDelay:50,verticalOffset:void 0};var g=window.requestAnimationFrame||function(a){a()};d=function(){function d(b,c){this.handler=b,this.columns=this.containerWidth=this.resizeTimer=null,this.activeItemCount=0,this.itemHeightsDirty=!0,this.placeholders=[],a.extend(!0,this,e,c),this.verticalOffset=this.verticalOffset||this.offset,this.update=f(this.update,this),this.onResize=f(this.onResize,this),this.onRefresh=f(this.onRefresh,this),this.getItemWidth=f(this.getItemWidth,this),this.layout=f(this.layout,this),this.layoutFull=f(this.layoutFull,this),this.layoutColumns=f(this.layoutColumns,this),this.filter=f(this.filter,this),this.clear=f(this.clear,this),this.getActiveItems=f(this.getActiveItems,this),this.refreshPlaceholders=f(this.refreshPlaceholders,this),this.sortElements=f(this.sortElements,this),this.updateFilterClasses=f(this.updateFilterClasses,this),this.updateFilterClasses(),this.autoResize&&a(window).bind("resize.wookmark",this.onResize),this.container.bind("refreshWookmark",this.onRefresh)}return d.prototype.updateFilterClasses=function(){for(var a,b,d,e,f=0,g=0,h=0,i={},j=this.possibleFilters;f<this.handler.length;f++)if(b=this.handler.eq(f),a=b.data("filterClass"),"object"==typeof a&&a.length>0)for(g=0;g<a.length;g++)d=c(a[g]),i[d]||(i[d]=[]),i[d].push(b[0]);for(;h<j.length;h++)e=c(j[h]),e in i||(i[e]=[]);this.filterClasses=i},d.prototype.update=function(b){this.itemHeightsDirty=!0,a.extend(!0,this,b)},d.prototype.onResize=function(){clearTimeout(this.resizeTimer),this.itemHeightsDirty=0!==this.flexibleWidth,this.resizeTimer=setTimeout(this.layout,this.resizeDelay)},d.prototype.onRefresh=function(){this.itemHeightsDirty=!0,this.layout()},d.prototype.filter=function(b,d){var e,f,g,h,i,j=[],k=a();if(b=b||[],d=d||"or",b.length){for(f=0;f<b.length;f++)i=c(b[f]),i in this.filterClasses&&j.push(this.filterClasses[i]);if(e=j.length,"or"==d||1==e)for(f=0;e>f;f++)k=k.add(j[f]);else if("and"==d){var l,m,n,o=j[0],p=!0;for(f=1;e>f;f++)j[f].length<o.length&&(o=j[f]);for(o=o||[],f=0;f<o.length;f++){for(m=o[f],p=!0,g=0;g<j.length&&p;g++)if(n=j[g],o!=n){for(h=0,l=!1;h<n.length&&!l;h++)l=n[h]==m;p&=l}p&&k.push(o[f])}}this.handler.not(k).addClass("inactive")}else k=this.handler;k.removeClass("inactive"),this.columns=null,this.layout()},d.prototype.refreshPlaceholders=function(b,c){for(var d,e,f,g,h,i,j=this.placeholders.length,k=this.columns.length,l=this.container.innerHeight();k>j;j++)d=a('<div class="wookmark-placeholder"/>').appendTo(this.container),this.placeholders.push(d);for(i=this.offset+2*parseInt(this.placeholders[0].css("borderLeftWidth"),10),j=0;j<this.placeholders.length;j++)if(d=this.placeholders[j],f=this.columns[j],j>=k||!f[f.length-1])d.css("display","none");else{if(e=f[f.length-1],!e)continue;h=e.data("wookmark-top")+e.data("wookmark-height")+this.verticalOffset,g=l-h-i,d.css({position:"absolute",display:g>0?"block":"none",left:j*b+c,top:h,width:b-i,height:g})}},d.prototype.getActiveItems=function(){return this.ignoreInactiveItems?this.handler.not(".inactive"):this.handler},d.prototype.getItemWidth=function(){var a=this.itemWidth,b=this.container.width()-2*this.outerOffset,c=this.handler.eq(0),d=this.flexibleWidth;if(void 0===this.itemWidth||0===this.itemWidth&&!this.flexibleWidth?a=c.outerWidth():"string"==typeof this.itemWidth&&this.itemWidth.indexOf("%")>=0&&(a=parseFloat(this.itemWidth)/100*b),d){"string"==typeof d&&d.indexOf("%")>=0&&(d=parseFloat(d)/100*b);var e=b+this.offset,f=~~(.5+e/(d+this.offset)),g=~~(e/(a+this.offset)),h=Math.max(f,g),i=Math.min(d,~~((b-(h-1)*this.offset)/h));a=Math.max(a,i),this.handler.css("width",a)}return a},d.prototype.layout=function(a){if(this.container.is(":visible")){var b,c=this.getItemWidth()+this.offset,d=this.container.width(),e=d-2*this.outerOffset,f=~~((e+this.offset)/c),g=0,h=0,i=0,j=this.getActiveItems(),k=j.length;if(this.itemHeightsDirty||!this.container.data("itemHeightsInitialized")){for(;k>i;i++)b=j.eq(i),b.data("wookmark-height",b.outerHeight());this.itemHeightsDirty=!1,this.container.data("itemHeightsInitialized",!0)}f=Math.max(1,Math.min(f,k)),g=this.outerOffset,"center"==this.align&&(g+=~~(.5+(e-(f*c-this.offset))>>1)),this.direction=this.direction||("right"==this.align?"right":"left"),h=a||null===this.columns||this.columns.length!=f||this.activeItemCount!=k?this.layoutFull(c,f,g):this.layoutColumns(c,g),this.activeItemCount=k,this.container.css("height",h),this.fillEmptySpace&&this.refreshPlaceholders(c,g),void 0!==this.onLayoutChanged&&"function"==typeof this.onLayoutChanged&&this.onLayoutChanged()}},d.prototype.sortElements=function(a){return"function"==typeof this.comparator?a.sort(this.comparator):a},d.prototype.layoutFull=function(c,d,e){var f,g,h=0,i=0,j=a.makeArray(this.getActiveItems()),k=j.length,l=null,m=null,n=[],o=[],p="left"==this.align?!0:!1;for(this.columns=[],j=this.sortElements(j);n.length<d;)n.push(this.outerOffset),this.columns.push([]);for(;k>h;h++){for(f=a(j[h]),l=n[0],m=0,i=0;d>i;i++)n[i]<l&&(l=n[i],m=i);f.data("wookmark-top",l),g=e,(m>0||!p)&&(g+=m*c),(o[h]={obj:f,css:{position:"absolute",top:l}}).css[this.direction]=g,n[m]+=f.data("wookmark-height")+this.verticalOffset,this.columns[m].push(f)}return b(o),Math.max.apply(Math,n)},d.prototype.layoutColumns=function(a,c){for(var d,e,f,g,h=[],i=[],j=0,k=0,l=0;j<this.columns.length;j++){for(h.push(this.outerOffset),e=this.columns[j],g=j*a+c,d=h[j],k=0;k<e.length;k++,l++)f=e[k].data("wookmark-top",d),(i[l]={obj:f,css:{top:d}}).css[this.direction]=g,d+=f.data("wookmark-height")+this.verticalOffset;h[j]=d}return b(i),Math.max.apply(Math,h)},d.prototype.clear=function(){clearTimeout(this.resizeTimer),a(window).unbind("resize.wookmark",this.onResize),this.container.unbind("refreshWookmark",this.onRefresh),this.handler.wookmarkInstance=null},d}(),a.fn.wookmark=function(a){return this.wookmarkInstance?this.wookmarkInstance.update(a||{}):this.wookmarkInstance=new d(this,a||{}),this.wookmarkInstance.layout(!0),this.show()}}),$(document).ready(function(){resizeDiv()}),window.onresize=function(){resizeDiv()},function(a){a("#gallery").imagesLoaded(function(){var b={autoResize:!0,itemWidth:380,flexibleWidth:"100%",container:a("#main"),offset:0,outerOffset:0,verticalOffset:-3,onLayoutChanged:!0},c=a("#gallery a"),d=a(window);d.resize(function(){var a=d.width(),b={flexibleWidth:"50%"};1024>a&&(b.flexibleWidth="100%"),c.wookmark(b)}),c.wookmark(b)})}(jQuery),$("#gallery a").click(function(){$(this).toggleClass("active")}),$(function(){var a=$("#masthead").offset().top,b=function(){var b=$(window).scrollTop();b>a?($("#masthead").css({position:"fixed"}),$(".admin-bar #masthead").css({top:32})):($("#masthead").css({position:"relative"}),$(".admin-bar #masthead").css({top:0}))};b(),$(window).scroll(function(){b()})}),$("#top-btn").click(function(){return $("html, body").animate({scrollTop:0},1e3),!1}),$("#add-btn").click(function(){$("#add-new-wrapper").toggleClass("active"),$("#add-btn").toggleClass("active")});